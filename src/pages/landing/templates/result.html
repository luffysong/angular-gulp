<div ng-if="!parentVm.open.sideBar" class="result-container">
  <div class="result-tip">
    <span ng-if="vm.$stateParams.kw">找到关于 <b>“{{vm.$stateParams.kw}}”</b> 的</span>
    <span ng-if="!vm.$stateParams.kw">全部搜索</span>结果<b>{{vm.listData.totalCount}}</b>条
  </div>
  <div class="result-content">
    <table infinite-scroll="vm.loadMore()" infinite-scroll-disabled='vm.dataLoading || vm.noMore || vm.needLogin' infinite-scroll-distance='0' ng-if="vm.$scope.parentVm.activeTab === 'company'">
      <tr>
        <td width="320">项目</td>
        <td>行业</td>
        <td>轮次</td>
        <td>投资方</td>
        <td>所在地</td>
        <td>时间</td>
        <td width="120">操作</td>
      </tr>
      <tr ng-repeat="obj in vm.listData.data track by $index">
        <td>
          <img ng-src="{{obj.logo || '/images/default-logo.png'}}" ng-click="vm.seeDetail(obj.id)" class="project-logo" />
          <div class="project-info">
            <div class="project-name">
              <span class="company-name" ng-click="vm.seeDetail(obj.id)">{{obj.name}}</span><span class="hot-tag" ng-if="obj.hot">热门</span><span class="classic-tag" ng-if="obj.classic">精品</span><span class="fund-state" ng-if="obj.funding">融资中</span>
            </div>
            <div class="project-intro">
              {{obj.brief}}
            </div>
            <div class="project-tag" ng-if="obj.advantage">
              <i class="icon-Hot"></i>
              <span>{{obj.advantage}}</span>
            </div>
          </div>
        </td>
        <td>{{obj.industryStr}}</td>
        <td class="org-col">
          {{obj.phase | companyFinancePhase}}
        </td>
        <td class="org-col">
          <section ng-repeat="org in obj.investParts | limitTo:3 track by $index" ng-bind="org"></section>
        </td>
        <td>{{obj.cityStr}}</td>
        <td>{{obj.publishDate | dateFilter}}</td>
        <td>
          <span ng-click="vm.collect()" class="collect-btn" ng-mouseenter="vm.triggerCollect(obj.id)" ng-class="{'collected':obj.followed}" cal-position>
            <span ng-show="obj.followed">已</span>收藏
            <div class="collect-modal" ng-hide="!vm.user.isLogin || !vm.user.isInvestor()" ng-if="obj.id === vm.cid" ng-click="$event.stopPropagation();">
              <section class="modal-title">选择收藏夹</section>
              <ul>
                 <li ng-repeat="item in vm.collections">
                  <input type="checkbox" class="checkbox" name='collection' ng-model="item.followed" ng-change="vm.change(item,$index)" ng-checked="item.followed">
                  <span class="favorite-name">{{item.name}}</span>
                  <span class="favorite-number">({{item.count}})</span>
                  <span class="favorite-status" ng-class="{'hidden':vm.status === 'suc' && $index == vm.activeIndex}" ng-hide="vm.status === 'cancel'">已添加</span>
                  <span class="favorite-status" ng-class="{'hidden':vm.status === 'cancel' && $index == vm.activeIndex}" ng-hide="vm.status === 'suc'">取消成功</span>
                 </li>
              </ul>
              <div class="new-create">
                <input type="text" name='createName' placeholder="创建新收藏夹" ng-model='vm.collectionName' maxlength="8">
                <a href="javascript:void(0)" class="create-link" ng-click="vm.create()">创建</a>
              </div>
              <div class="create-suc" ng-show="vm.createSuc && !vm.errMsg">创建成功</div>
              <div class="error-msg" ng-show="vm.errMsg && !vm.createSuc" ng-bind="vm.errMsg"></div>
            </div>
          </span>
        </td>
      </tr>
    </table>
    <table infinite-scroll="vm.loadMore()" infinite-scroll-disabled='vm.dataLoading' infinite-scroll-distance='0' ng-if="vm.$scope.parentVm.activeTab === 'user'">
      <tr>
        <td width="320">投资人</td>
        <td>关注行业</td>
        <td>偏好轮次</td>
        <td>投资总数</td>
        <td>最近投资</td>
        <td>所在地</td>
      </tr>
      <tr ng-repeat="obj in vm.listData.data track by $index">
        <td>
          <img ng-src="{{obj.logo || '/images/investor-logo.png'}}" class="investor-logo" />
          <div class="project-info">
            <div class="project-name">
              <span class="company-name">{{obj.name}}</span>
            </div>
            <div class="project-intro">
              <span class="user-brief">{{obj.brief}}</span>
              <span ng-if="obj.brief">|</span>
              <span>{{obj.position}}</span>
            </div>
          </div>
        </td>
        <td class="org-col">
          <section ng-repeat="c in obj.industry | limitTo:3 track by $index" ng-bind="c"></section>
        </td>
        <td class="org-col">
          <section ng-repeat="c in obj.phase | limitTo:3 track by $index" ng-bind="c"></section>
        </td>
        <td>{{obj.investCnt}}</td>
        <td class="org-col">
          <section ng-repeat="org in obj.investCaseList | limitTo:3 track by $index" ng-bind="org.name"></section>
        </td>
        <td>{{obj.city}}</td>
      </tr>
    </table>
    <table infinite-scroll="vm.loadMore()" infinite-scroll-disabled='vm.dataLoading' infinite-scroll-distance='0' ng-if="vm.$scope.parentVm.activeTab === 'org'">
      <tr>
        <td width="320">机构</td>
        <td>最近投资</td>
        <td>投资总数</td>
        <td>成员</td>
      </tr>
      <tr ng-repeat="obj in vm.listData.data track by $index">
        <td>
          <img ng-src="{{obj.logo || '/images/org-logo.png'}}" class="project-logo" />
          <div class="project-info">
            <div class="project-name">
              <span class="company-name">{{obj.name}}</span>
            </div>
            <div class="org-intro">
              {{obj.brief}}
            </div>
          </div>
        </td>
        <td class="org-col">
          <section ng-repeat="org in obj.investCaseList | limitTo:3 track by $index" ng-bind="org.name"></section>
        </td>
        <td>{{obj.investCnt}}</td>
        <td>{{obj.memberCnt}}</td>

      </tr>
    </table>
    <div  ng-if="vm.needLogin" class="load-more">
      <a  href="javascript:;" ng-click="vm.login()">
        登录查看更多
      </a>
    </div>
    <div class="load-more" ng-show="vm.dataLoading && !vm.noMore">
      正在加载更多...
    </div>
    <div class="load-more" ng-if="vm.noMore && !vm.needLogin">
      已无更多数据
    </div>
  </div>
</div>

