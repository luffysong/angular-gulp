<div id="projectDetailWrapper" ng-class="{small: searchVm.small || searchVm.tinly}" class="project-wrapper">
  <header>
  <section class="base-info-wrapper">
    <div ng-if="!vm.baseInfoVM.isEdit" class="base-info-content">
      <div>
        <img ng-src="{{vm.baseInfoVM.logo || '/images/default-logo.png'}}" class="logo" alt="">
      </div>
      <div>
        <h1>
          <div class="base-info-name" title="{{::vm.baseInfoVM.name}}">{{::vm.baseInfoVM.name}}</div>
          <span>{{vm.fundsVM.fundsVo.fundsPhase | financePhase}}</span><span ng-if="vm.fundsVM.funds"> · 融资中</span>
          <a class="btn-edit"
            ng-if="vm.isEditMode"
            ng-click="vm.baseInfoVM.enterEditMode()"
            href="javascript:void(0)" data-stat-click="project.{{vm.id}}.baseInfo.edit">编辑</a>
        </h1>
        <h3>{{::vm.baseInfoVM.brief}}</h3>
        <p class="highlights" ng-if="vm.baseInfoVM.advantage && root.user.isInvestor() || (vm.isEditMode && vm.user != 'commen')">
          <span class="icon-highlights">
            <span>亮点</span>
          </span>
          <span class="highlight">{{vm.baseInfoVM.advantage}}</span>
        </p>
        <p class="icons">
          <a ng-if="vm.baseInfoVM.weibo"
          class="kr-icon icon-Weibo link-none" href="" ng-class="{'icon-Weibo-active':vm.baseInfoVM.weibo}"
          ng-href="{{::vm.baseInfoVM.weibo}}" target="_blank"></a>
        <span class="kr-icon icon-Weibo link-none" ng-if="!vm.baseInfoVM.weibo" tooltips tooltip-template="未填写"
          tooltip-smart="true" tooltip-class="tooltip"></span>
          <a class="kr-icon icon-Wechat link-none" ng-class="{'icon-Wechat-active':vm.baseInfoVM.weixin}"
            tooltips tooltip-template="{{vm.baseInfoVM.weixin?vm.baseInfoVM.weixin:'未填写'}}" tooltip-class="tooltip">
          </a>
          <a class="website ellipsis icon-website" target="_blank" ng-class="{'icon-website-active':vm.baseInfoVM.website}" ng-href="{{::vm.baseInfoVM.website}}">
          </a>
        </p>
      </div>
      <div class="top-info" ng-show="vm.baseInfoVM.projectStatHeader">
        <div class="top-left" ng-show="vm.baseInfoVM.showTop">
          <div>
            <span class="top1">{{vm.baseInfoVM.projectStatHeader.tag1.tag_name}}</span>
          </div>
          <div class="top-number">
            <span class="number">{{vm.baseInfoVM.projectStatHeader.tag1.tag_rank}}</span>名
            <div class="up-angle-big left-angle" ng-show="vm.baseInfoVM.projectStatHeader.tag1.rank_var > 0"></div>
            <div class="down-angle-big left-angle" ng-show="vm.baseInfoVM.projectStatHeader.tag1.rank_var < 0"></div>
          </div>
          <div class="top2" ng-show="vm.baseInfoVM.showTop2">
            <span>{{vm.baseInfoVM.projectStatHeader.tag2.tag_name}}</span>
            <span class="number">{{vm.baseInfoVM.projectStatHeader.tag2.tag_rank}}</span>名
            <div class="up-angle left-angle" ng-show="vm.baseInfoVM.projectStatHeader.tag2.rank_var > 0"></div>
            <div class="down-angle left-angle" ng-show="vm.baseInfoVM.projectStatHeader.tag2.rank_var < 0"></div>
          </div>
        </div>
        <div class="top-left" ng-show="!vm.baseInfoVM.showTop"><div class="no-top-data no-top1">暂无</div></div>

        <div class="top-right">
          <div class="user">
            <a kr-scroll-click href="#product" du-smooth-scroll="" du-scrollspy="" offset="114" ng-click="productVM.active = 'product'">DAU</a>
          </div>
          <div class="expose">
            <a kr-scroll-click href="#product" du-smooth-scroll="" du-scrollspy="" offset="114" ng-click="productVM.active = 'product'">曝光量</a>
          </div>
          <div class="finance">
            <a kr-scroll-click href="#financeHistory" du-smooth-scroll="" du-scrollspy="" offset="{{vm.financeHistory}}"
              ng-class="{'active':!vm.baseInfoVM.advantage && !(vm.baseInfoVM.industryTag || vm.baseInfoVM.intro) && !vm.fundsVM.funds}">
              最新融资额
            </a>
          </div>
          <div class="numbers">
            <div class="number" ng-class="{'show-angle': vm.baseInfoVM.projectStatHeader.user_amount_var > 0 ||
              vm.baseInfoVM.projectStatHeader.user_amount_var < 0}">
              <div class="up-angle right-angle" ng-show="vm.baseInfoVM.projectStatHeader.user_amount_var > 0"></div>
              <div class="down-angle right-angle" ng-show="vm.baseInfoVM.projectStatHeader.user_amount_var < 0"></div
              ><a kr-scroll-click href="#product" du-smooth-scroll="" du-scrollspy="" offset="114" ng-click="productVM.active = 'product'"
              ><span ng-show="vm.baseInfoVM.projectStatHeader.user_amount">{{vm.baseInfoVM.projectStatHeader.user_amount / 10000}}万</span>
              </a>
              <span class="no-number" ng-show="!vm.baseInfoVM.projectStatHeader.user_amount">暂无</span>
            </div>
            <div class="number" ng-class="{'show-angle': vm.baseInfoVM.projectStatHeader.exposure_amount_var > 0 ||
              vm.baseInfoVM.projectStatHeader.exposure_amount_var < 0}">
              <div class="up-angle right-angle" ng-show="vm.baseInfoVM.projectStatHeader.exposure_amount_var > 0"></div>
              <div class="down-angle right-angle" ng-show="vm.baseInfoVM.projectStatHeader.exposure_amount_var < 0"></div
              ><a kr-scroll-click href="#product" du-smooth-scroll="" du-scrollspy="" offset="114" ng-click="productVM.active = 'product'"
              ><span ng-show="vm.baseInfoVM.projectStatHeader.exposure_amount">{{vm.baseInfoVM.projectStatHeader.exposure_amount}}</span>
              </a>
              <span class="no-number" ng-show="!vm.baseInfoVM.projectStatHeader.exposure_amount">暂无</span>
            </div>
              <div class="number">
               <a kr-scroll-click href="#financeHistory" du-smooth-scroll="" du-scrollspy="" offset="{{vm.financeHistory}}"
                ng-class="{'active':!vm.baseInfoVM.advantage && !(vm.baseInfoVM.industryTag || vm.baseInfoVM.intro) && !vm.fundsVM.funds}">
                <span class="finance-number" ng-show="vm.baseInfoVM.showFinanceAmount" ng-if="vm.baseInfoVM.amountIsNumber">
                {{vm.baseInfoVM.projectStatHeader.finance_amount.unit | unitFormat}}
                {{vm.baseInfoVM.projectStatHeader.finance_amount.val}} 万</span>
                <span class="finance-number" ng-show="vm.baseInfoVM.showFinanceAmount" ng-if="!vm.baseInfoVM.amountIsNumber">
                {{vm.baseInfoVM.projectStatHeader.finance_amount.val}}</span>
                <span class="no-number" ng-show="!vm.baseInfoVM.showFinanceAmount">未披露</span>
              </a>
            </div>
          </div>
        </div>
      </div>
      <div class="top-info" ng-show="!vm.baseInfoVM.projectStatHeader"><div class="no-top-data">暂无</div></div>
    </div>
    <div ng-if="vm.baseInfoVM.isEdit" class="base-info-content-edit">
      <div class="upload-logo">
        <img ng-src="{{vm.baseInfoVM.logo || '/images/default-logo.png'}}" class="logo" alt="">
        <a ngf-select="vm.baseInfoVM.uploadImage($files)"
          ngf-accept="'image/*'"
          class="btn-upload-logo" href="javascript:;"></a>
        <p>建议上传大小
        <p>90*90px</p>
      </div>
      <div>
        <form name="vm.baseInfoVM.form">

          <div class="form-group">
            <label for=""><span class="required">*</span> 项目名称</label>
            <span class="form-tip">30天内只能修改一次</span>
            <input  ng-model="vm.baseInfoVM.name"
              placeholder="请填写项目名称或核心产品名称"
              message-id="messageName"
              no-validation-message="true"
              maxlength="30"
              validator="required"
              type="text" name="name" class="form-control" />
          </div>

          <div class="form-group">
            <label for="">项目别称</label>

            <span id="messageFullName"
              class="error-tip"></span>
            <input  ng-model="vm.baseInfoVM.remarkName"
              placeholder="请填写项目别名或曾用名，非必填"
              validator="notEqual=vm.baseInfoVM.name"
              message-id="messageFullName"
              not-equal-error-message="请不要再次填写项目名称"
              maxlength="50"
              type="text" name="fullName" class="form-control" />
          </div>

          <div class="form-group">
            <label for=""><span class="required">*</span> 一句话简介</label>
            <span class="error-tip" id="messageBrief"></span>
            <input  ng-model="vm.baseInfoVM.brief"
            validator="required,minlength=5" message-id="messageBrief"
            minlength-error-message="可以描述的更加详细一些（不得少于5个字）"
            maxlength="30"
            placeholder="一句话概括产品与服务，30字内"
            type="text" name="brief" class="form-control" />
          </div>
          <div class="form-group">
            <label for="">公司官网</label>
            <span id="messageWebsite" class="error-tip" ></span>
            <input  ng-model="vm.baseInfoVM.website"
              placeholder="请填写公司的官网，请以http(s)://开头"
              validator="http" message-id="messageWebsite"
              type="text" name="website" class="form-control" />
          </div>
          <div class="form-group">
            <label for="">新浪微博</label>
            <span id="messageweibo" class="error-tip" ></span>
            <input  ng-model="vm.baseInfoVM.weibo"
              placeholder="请填写新浪微博主页链接"
              validator="http"
              type="text" name="weibo" class="form-control" />
          </div>
          <div class="form-group">
            <label for="">微信公众号</label>
            <span ng-if="vm.baseInfoVM.form.weixin.$invalid === true" class="error-tip" >
              微信公众号为6-20个字符
            </span>
            <input  ng-model="vm.baseInfoVM.weixin"
              placeholder="请填写项目微信公众号，不建议填写个人微信号"
              validator="minlength=6,maxlength=20"
              maxlength="20"
              no-validation-message="true"
              type="text" name="weixin" class="form-control" />
          </div>

        </form>
      </div>
      <div class="form-bottom">

        <p class="splitter"> </p>
        <p class="tip-text">注意：行业不开放编辑；所有更改内容均会提交审核，审核期间不可对此模块做任何的更改，
          通过后对所有用户公开</p>
        <div>
          <a class="save" ng-click="vm.baseInfoVM.update()" href="javascript:;" data-stat-click="project.{{vm.id}}.baseInfo.edit.save">保存</a>
          <a class="cancel" ng-click="vm.baseInfoVM.cancel()" href="javascript:;" data-stat-click="project.{{vm.id}}.baseInfo.edit.cancel">取消</a>
        </div>
      </div>

    </div>
  </section>
  <section ng-class="{small: searchVm.small, tinly: searchVm.tiny}" sticky offset="50" class="nav-wrapper">
    <nav>
      <ul class='navigate'>
        <li ng-show="vm.baseInfoVM.investAdvantage && !vm.isEditMode">
          <a kr-scroll-click
            href="#light" du-smooth-scroll="" du-scrollspy=""  offset="{{vm.light}}" >
            投资亮点
          </a>
        </li>
        <li ng-hide="!(vm.baseInfoVM.industryTag || vm.baseInfoVM.intro)">
          <a kr-scroll-click href="#baseInfo" du-smooth-scroll="" du-scrollspy="" offset="{{vm.baseInfo}}" >
            项目介绍
          </a>
        </li>
        <!-- <li ng-show="(vm.fundsVM.fundsVo.scale || vm.fundsVM.fundsVo.dataLights || vm.fundsVM.fundsVo.competitor || vm.fundsVM.fundsVo.projectPlan) && (vm.user != 'commen' || vm.investorType)">
          <a kr-scroll-click href="#financeDetail" du-smooth-scroll="" du-scrollspy="" offset="{{vm.financeDetail}}" ng-class="{'active':!(vm.baseInfoVM.industryTag || vm.baseInfoVM.intro)}">
            融资详情
          </a>
        </li> -->
        <li>
          <a kr-scroll-click href="#financeHistory" du-smooth-scroll="" du-scrollspy="" offset="{{vm.financeHistory}}" ng-class="{'active':!vm.baseInfoVM.advantage && !(vm.baseInfoVM.industryTag || vm.baseInfoVM.intro) && !vm.fundsVM.funds}">
            融资经历
          </a>
        </li>
        <li>
          <a kr-scroll-click href="#founder" du-smooth-scroll="" du-scrollspy="" offset="114" >
            创始团队
          </a>
        </li>
        <li>
          <a kr-scroll-click href="#product" du-smooth-scroll="" du-scrollspy="" offset="114" >
            项目数据
          </a>
        </li>
        <li>
          <a href="#news" du-smooth-scroll="" du-scrollspy="" offset="110" >
           相关新闻
          </a>
        </li>
        <li ng-if="vm.isEditMode" >
          <a kr-scroll-click href="#relativeUser" du-smooth-scroll="" du-scrollspy="" offset="114" >
            相关用户
          </a>
        </li>
        <li>
          <a  kr-scroll-click
            href="#similarItem" du-smooth-scroll="" du-scrollspy="" offset="114" >
            相似项目
          </a>
        </li>
        <li class="navigate-btn">
        <a href="#" ng-click="vm.claimVM.claim()" ng-show="vm.user == 'commen'" login-btn data-stat-click="project.{{vm.id}}.claim">认领</a>
          <a ui-sref="financeRoute({id: vm.id, name: vm.name})"
            ng-show="vm.isEditMode && vm.financeState === '1'" data-stat-click="project.{{vm.id}}.applyFinance">申请融资</a>
          <a ui-sref="financeRoute({id: vm.id, name: vm.name})"
            ng-show="vm.isEditMode && vm.financeState === '2'" data-stat-click="project.{{vm.id}}.financeSetting">融资设置</a>


          <a href="#" ui-sref="project.edit({id: vm.id})"
            ng-show="vm.user != 'commen' && vm.userId && !vm.isEditMode" data-stat-click="project.{{vm.id}}.edit">编辑项目</a>
        </li>
      </ul>
    </nav>
  </section>
</header>
  <section id="light" class="project-module light"
  ng-if="vm.baseInfoVM.investAdvantage && !vm.isEditMode"
  ng-include="'/pages/project/templates/light.html'">
  </section>

  <section id="baseInfo" class="project-module" ng-include="'/pages/project/templates/baseInfo.html'"
    ng-if="vm.baseInfoVM.industryTag || vm.baseInfoVM.intro">
  </section>

<!--   <section id="financeDetail" ng-include="'/pages/project/templates/financeDetail.html'" class="project-module finance"
    ng-show="(vm.fundsVM.fundsVo.scale || vm.fundsVM.fundsVo.dataLights || vm.fundsVM.fundsVo.competitor || vm.fundsVM.fundsVo.projectPlan) && (vm.user != 'commen' || vm.investorType)">
    融资详情
  </section> -->
  <section id="financeHistory" ng-include="'/pages/project/templates/financeHistory.html'" class="project-module">
    融资经历
  </section>
  <section id="founder" ng-include="'/pages/project/templates/founder.html'" class="project-module">
    创始团队
  </section>
  <section id="product" ng-include="'/pages/project/templates/product.html'" class="project-module">
    产品及数据
  </section>
  <section id="news" class="project-module" ng-include="'/pages/project/templates/new.html'">
    相关新闻
  </section>

  <!-- 相关用户只有在编辑模式下才有 -->
  <section id="relativeUser" ng-if="vm.isEditMode" class="project-module"
    ng-include="'/pages/project/templates/relatedUser.html'"></section>

  <section id="similarItem" class="project-module" ng-include="'/pages/project/templates/similarItem.html'">
  </section>
  <section ng-if="!vm.isEditMode" ng-include="'/pages/project/templates/footer.html'" >

  </section>
</div>
<div ui-view="NULL"></div>
